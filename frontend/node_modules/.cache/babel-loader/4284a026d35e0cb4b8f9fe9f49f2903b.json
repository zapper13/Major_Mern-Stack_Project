{"ast":null,"code":"var _jsxFileName = \"D:\\\\MERN-Online-Outpost-main\\\\frontend\\\\src\\\\screens\\\\ProductScreen.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Row, Col, Image, ListGroup, Button, Form } from \"react-bootstrap\";\nimport Rating from \"../components/Rating\";\nimport Message from \"../components/Message\";\nimport Loader from \"../components/Loader\";\nimport { listProductDetails, createProductReview } from \"../actions/productActions\";\nimport { PRODUCT_CREATE_REVIEW_RESET } from \"../constants/productConstants\";\n\nconst ProductScreen = ({\n  history,\n  match\n}) => {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState(\"\");\n  const dispatch = useDispatch();\n  const productDetails = useSelector(state => state.productDetails);\n  const {\n    loading,\n    error,\n    product\n  } = productDetails;\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const productReviewCreate = useSelector(state => state.productReviewCreate);\n  const {\n    success: successProductReview,\n    loading: loadingProductReview,\n    error: errorProductReview\n  } = productReviewCreate;\n  useEffect(() => {\n    if (successProductReview) {\n      setRating(0);\n      setComment(\"\");\n    }\n\n    if (!product._id || product._id !== match.params.id) {\n      dispatch(listProductDetails(match.params.id));\n      dispatch({\n        type: PRODUCT_CREATE_REVIEW_RESET\n      });\n    }\n  }, [dispatch, match, successProductReview, product]);\n\n  const addToCartHandler = () => {\n    history.push(`/cart/${match.params.id}?qty=${qty}`);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(createProductReview(match.params.id, {\n      rating,\n      comment\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"btn btn-outline-primary my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"Go Home\"), loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }) : error ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    className: \"my-5\",\n    gap: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 9,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"bg-light mx-2\",\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 7,\n    style: {\n      padding: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: product.image,\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    className: \"rounded m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    className: \"py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 45\n    }\n  }, product.name)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    className: \"py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    value: product.rating,\n    text: `${product.numReviews} reviews`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    className: \"py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 41\n    }\n  }, \"$\", product.price), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    className: \"py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 41\n    }\n  }, product.description))))), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    className: \"mx-2 bg-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    className: \"py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"mx-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 41\n    }\n  }, \"Price:\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 41\n    }\n  }, \"$\", product.price))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    className: \"py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"mx-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 41\n    }\n  }, \"Status:\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 41\n    }\n  }, product.countInStock ? \"In Stock\" : \"Out of Stock\"))), product.countInStock > 0 && /*#__PURE__*/React.createElement(ListGroup.Item, {\n    className: \"py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"mx-1 align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 45\n    }\n  }, \"Quantity:\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    value: qty,\n    onChange: e => setQty(e.target.value),\n    style: {\n      outline: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 49\n    }\n  }, [...Array(product.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 57\n    }\n  }, x + 1)))))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    className: \"py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    className: \"mx-1\",\n    disabled: !product.countInStock,\n    onClick: addToCartHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 37\n    }\n  }, product.countInStock ? \"Add to Cart\" : \"Out of Stock\"))))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 29\n    }\n  }, \"Reviews\"), product.reviews.length === 0 && /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 33\n    }\n  }, \"No Reviews\"), /*#__PURE__*/React.createElement(ListGroup, {\n    className: \"my-4\",\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 29\n    }\n  }, product.reviews.map(review => /*#__PURE__*/React.createElement(ListGroup.Item, {\n    key: review._id,\n    className: \"my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 41\n    }\n  }, review.name), /*#__PURE__*/React.createElement(Rating, {\n    value: review.rating,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 41\n    }\n  }, review.createdAt.substring(0, 10), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 45\n    }\n  }), review.comment)))), /*#__PURE__*/React.createElement(ListGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 37\n    }\n  }, \"Write a Customer Review\"), successProductReview && /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 41\n    }\n  }, \"Review submitted successfully\"), loadingProductReview && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 62\n    }\n  }), errorProductReview && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 41\n    }\n  }, errorProductReview), userInfo ? /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"rating\",\n    className: \"my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 49\n    }\n  }, \"Rating\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    value: rating,\n    onChange: e => setRating(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 53\n    }\n  }, \"Select...\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 53\n    }\n  }, \"1 - Poor\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 53\n    }\n  }, \"2 - Fair\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 53\n    }\n  }, \"3 - Good\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 53\n    }\n  }, \"4 - Very Good\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 53\n    }\n  }, \"5 - Excellent\"))), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"comment\",\n    className: \"my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 49\n    }\n  }, \"Comment\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"textarea\",\n    row: \"3\",\n    value: comment,\n    onChange: e => setComment(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 49\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    disabled: loadingProductReview,\n    type: \"submit\",\n    variant: \"primary\",\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 45\n    }\n  }, \"Submit\")) : /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 41\n    }\n  }, \"Please\", \" \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 45\n    }\n  }, \"sign in\"), \" to write a review\", \" \")))))));\n};\n\nexport default ProductScreen;","map":{"version":3,"sources":["D:/MERN-Online-Outpost-main/frontend/src/screens/ProductScreen.js"],"names":["React","useState","useEffect","Link","useDispatch","useSelector","Row","Col","Image","ListGroup","Button","Form","Rating","Message","Loader","listProductDetails","createProductReview","PRODUCT_CREATE_REVIEW_RESET","ProductScreen","history","match","qty","setQty","rating","setRating","comment","setComment","dispatch","productDetails","state","loading","error","product","userLogin","userInfo","productReviewCreate","success","successProductReview","loadingProductReview","errorProductReview","_id","params","id","type","addToCartHandler","push","submitHandler","e","preventDefault","padding","image","name","numReviews","price","description","countInStock","target","value","outline","Array","keys","map","x","reviews","length","review","createdAt","substring"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n    Row,\n    Col,\n    Image,\n    ListGroup,\n    Button,\n    Form,\n} from \"react-bootstrap\";\nimport Rating from \"../components/Rating\";\nimport Message from \"../components/Message\";\nimport Loader from \"../components/Loader\";\nimport {\n    listProductDetails,\n    createProductReview,\n} from \"../actions/productActions\";\nimport { PRODUCT_CREATE_REVIEW_RESET } from \"../constants/productConstants\";\n\nconst ProductScreen = ({ history, match }) => {\n    const [qty, setQty] = useState(1);\n    const [rating, setRating] = useState(0);\n    const [comment, setComment] = useState(\"\");\n\n    const dispatch = useDispatch();\n\n    const productDetails = useSelector((state) => state.productDetails);\n    const { loading, error, product } = productDetails;\n\n    const userLogin = useSelector((state) => state.userLogin);\n    const { userInfo } = userLogin;\n\n    const productReviewCreate = useSelector(\n        (state) => state.productReviewCreate\n    );\n    const {\n        success: successProductReview,\n        loading: loadingProductReview,\n        error: errorProductReview,\n    } = productReviewCreate;\n\n    useEffect(() => {\n        if (successProductReview) {\n            setRating(0);\n            setComment(\"\");\n        }\n        if (!product._id || product._id !== match.params.id) {\n            dispatch(listProductDetails(match.params.id));\n            dispatch({ type: PRODUCT_CREATE_REVIEW_RESET });\n        }\n    }, [dispatch, match, successProductReview, product]);\n\n    const addToCartHandler = () => {\n        history.push(`/cart/${match.params.id}?qty=${qty}`);\n    };\n\n    const submitHandler = (e) => {\n        e.preventDefault();\n        dispatch(\n            createProductReview(match.params.id, {\n                rating,\n                comment,\n            })\n        );\n    };\n\n    return (\n        <div>\n            <Link to=\"/\" className=\"btn btn-outline-primary my-3\">\n                Go Home\n            </Link>\n\n            {loading ? (\n                <Loader />\n            ) : error ? (\n                <Message variant=\"warning\">{error}</Message>\n            ) : (\n                <>\n                    <Row className=\"my-5\" gap={2}>\n                        <Col md={9} className=\"mb-4\">\n                            <Row className=\"bg-light mx-2\" variant=\"flush\">\n                                <Col md={7} style={{ padding: 0 }}>\n                                    <Image src={product.image} fluid />\n                                </Col>\n\n                                <Col md={5}>\n                                    <ListGroup\n                                        variant=\"flush\"\n                                        className=\"rounded m-2\"\n                                    >\n                                        <ListGroup.Item className=\"py-3\">\n                                            <h5>{product.name}</h5>\n                                        </ListGroup.Item>\n\n                                        <ListGroup.Item className=\"py-3\">\n                                            <Rating\n                                                value={product.rating}\n                                                text={`${product.numReviews} reviews`}\n                                            />\n                                        </ListGroup.Item>   \n\n                                        <ListGroup.Item className=\"py-3\">\n                                            ${product.price}\n                                        </ListGroup.Item>\n\n                                        <ListGroup.Item className=\"py-3\">\n                                            {product.description}\n                                        </ListGroup.Item>\n                                    </ListGroup>\n                                </Col>\n                            </Row>\n                        </Col>\n\n                        <Col md={3}>\n                            <ListGroup\n                                variant=\"flush\"\n                                className=\"mx-2 bg-light\"\n                            >\n                                <ListGroup.Item className=\"py-3\">\n                                    <Row className=\"mx-1\">\n                                        <Col>Price:</Col>\n                                        <Col>${product.price}</Col>\n                                    </Row>\n                                </ListGroup.Item>\n\n                                <ListGroup.Item className=\"py-3\">\n                                    <Row className=\"mx-1\">\n                                        <Col>Status:</Col>\n                                        <Col>\n                                            {product.countInStock\n                                                ? \"In Stock\"\n                                                : \"Out of Stock\"}\n                                        </Col>\n                                    </Row>\n                                </ListGroup.Item>\n\n                                {product.countInStock > 0 && (\n                                    <ListGroup.Item className=\"py-3\">\n                                        <Row className=\"mx-1 align-items-center\">\n                                            <Col>Quantity:</Col>\n                                            <Col>\n                                                <Form.Control\n                                                    as=\"select\"\n                                                    value={qty}\n                                                    onChange={(e) =>\n                                                        setQty(e.target.value)\n                                                    }\n                                                    style={{ outline: \"none\" }}\n                                                >\n                                                    {[\n                                                        ...Array(\n                                                            product.countInStock\n                                                        ).keys(),\n                                                    ].map((x) => (\n                                                        <option\n                                                            key={x + 1}\n                                                            value={x + 1}\n                                                        >\n                                                            {x + 1}\n                                                        </option>\n                                                    ))}\n                                                </Form.Control>\n                                            </Col>\n                                        </Row>\n                                    </ListGroup.Item>\n                                )}\n\n                                <ListGroup.Item className=\"py-3\">\n                                    <Button\n                                        variant=\"primary\"\n                                        className=\"mx-1\"\n                                        disabled={!product.countInStock}\n                                        onClick={addToCartHandler}\n                                    >\n                                        {product.countInStock\n                                            ? \"Add to Cart\"\n                                            : \"Out of Stock\"}\n                                    </Button>\n                                </ListGroup.Item>\n                            </ListGroup>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col md={6}>\n                            <h2>Reviews</h2>\n                            {product.reviews.length === 0 && (\n                                <Message>No Reviews</Message>\n                            )}\n                            <ListGroup className=\"my-4\" variant=\"flush\">\n                                {product.reviews.map((review) => (\n                                    <ListGroup.Item\n                                        key={review._id}\n                                        className=\"my-2\"\n                                    >\n                                        <strong>{review.name}</strong>\n                                        <Rating value={review.rating} />\n                                        <p>\n                                            {review.createdAt.substring(0, 10)}\n                                            <br />\n                                            {review.comment}\n                                        </p>\n                                    </ListGroup.Item>\n                                ))}\n                            </ListGroup>\n                            <ListGroup>\n                                <ListGroup.Item>\n                                    <h3 className=\"my-3\">\n                                        Write a Customer Review\n                                    </h3>\n                                    {successProductReview && (\n                                        <Message variant=\"success\">\n                                            Review submitted successfully\n                                        </Message>\n                                    )}\n                                    {loadingProductReview && <Loader />}\n                                    {errorProductReview && (\n                                        <Message variant=\"danger\">\n                                            {errorProductReview}\n                                        </Message>\n                                    )}\n                                    {userInfo ? (\n                                        <Form onSubmit={submitHandler}>\n                                            <Form.Group\n                                                controlId=\"rating\"\n                                                className=\"my-2\"\n                                            >\n                                                <Form.Label>Rating</Form.Label>\n                                                <Form.Control\n                                                    as=\"select\"\n                                                    value={rating}\n                                                    onChange={(e) =>\n                                                        setRating(\n                                                            e.target.value\n                                                        )\n                                                    }\n                                                >\n                                                    <option value=\"\">\n                                                        Select...\n                                                    </option>\n                                                    <option value=\"1\">\n                                                        1 - Poor\n                                                    </option>\n                                                    <option value=\"2\">\n                                                        2 - Fair\n                                                    </option>\n                                                    <option value=\"3\">\n                                                        3 - Good\n                                                    </option>\n                                                    <option value=\"4\">\n                                                        4 - Very Good\n                                                    </option>\n                                                    <option value=\"5\">\n                                                        5 - Excellent\n                                                    </option>\n                                                </Form.Control>\n                                            </Form.Group>\n                                            <Form.Group\n                                                controlId=\"comment\"\n                                                className=\"my-2\"\n                                            >\n                                                <Form.Label>Comment</Form.Label>\n                                                <Form.Control\n                                                    as=\"textarea\"\n                                                    row=\"3\"\n                                                    value={comment}\n                                                    onChange={(e) =>\n                                                        setComment(\n                                                            e.target.value\n                                                        )\n                                                    }\n                                                ></Form.Control>\n                                            </Form.Group>\n                                            <Button\n                                                disabled={loadingProductReview}\n                                                type=\"submit\"\n                                                variant=\"primary\"\n                                                className=\"my-3\"\n                                            >\n                                                Submit\n                                            </Button>\n                                        </Form>\n                                    ) : (\n                                        <Message>\n                                            Please{\" \"}\n                                            <Link to=\"/login\">sign in</Link> to\n                                            write a review{\" \"}\n                                        </Message>\n                                    )}\n                                </ListGroup.Item>\n                            </ListGroup>\n                        </Col>\n                    </Row>\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default ProductScreen;\n"]},"metadata":{},"sourceType":"module"}